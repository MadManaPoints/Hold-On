[gd_scene load_steps=24 format=3 uid="uid://tdujec33wash"]

[ext_resource type="Script" uid="uid://dvon2dbuvgb33" path="res://main.gd" id="1_0xm2m"]
[ext_resource type="PackedScene" uid="uid://bij04v2y3yys3" path="res://scenes/proximity_test.tscn" id="3_h2yge"]
[ext_resource type="PackedScene" uid="uid://bawv6l13l36np" path="res://scenes/hand_area.tscn" id="4_lquwl"]
[ext_resource type="PackedScene" uid="uid://b625eilen4luf" path="res://new_player.tscn" id="5_7mycd"]
[ext_resource type="Texture2D" uid="uid://bj1fwi2fi1i3y" path="res://assets/black_box.png" id="5_lquwl"]

[sub_resource type="ProceduralSkyMaterial" id="ProceduralSkyMaterial_ig7tw"]
sky_horizon_color = Color(0.662243, 0.671743, 0.686743, 1)
ground_horizon_color = Color(0.662243, 0.671743, 0.686743, 1)

[sub_resource type="Sky" id="Sky_0xm2m"]
sky_material = SubResource("ProceduralSkyMaterial_ig7tw")

[sub_resource type="Environment" id="Environment_h2yge"]
background_mode = 2
sky = SubResource("Sky_0xm2m")
tonemap_mode = 2
glow_enabled = true

[sub_resource type="BoxShape3D" id="BoxShape3D_lquwl"]
size = Vector3(49.4164, 2.06006, 0.517578)

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_lquwl"]
animation = &"New_idle"

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_lquwl"]
filter_enabled = true
filters = ["Node/Skeleton3D:mixamorigRightArm", "Node/Skeleton3D:mixamorigRightForeArm", "Node/Skeleton3D:mixamorigRightHand", "Node/Skeleton3D:mixamorigRightHandIndex1", "Node/Skeleton3D:mixamorigRightHandIndex2", "Node/Skeleton3D:mixamorigRightHandIndex3", "Node/Skeleton3D:mixamorigRightHandMiddle1", "Node/Skeleton3D:mixamorigRightHandMiddle2", "Node/Skeleton3D:mixamorigRightHandMiddle3", "Node/Skeleton3D:mixamorigRightHandPinky1", "Node/Skeleton3D:mixamorigRightHandPinky2", "Node/Skeleton3D:mixamorigRightHandPinky3", "Node/Skeleton3D:mixamorigRightHandRing1", "Node/Skeleton3D:mixamorigRightHandRing2", "Node/Skeleton3D:mixamorigRightHandRing3", "Node/Skeleton3D:mixamorigRightHandThumb1", "Node/Skeleton3D:mixamorigRightHandThumb2", "Node/Skeleton3D:mixamorigRightHandThumb3", "Node/Skeleton3D:mixamorigRightShoulder"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_272bh"]
animation = &"New_walk"

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_5vw27"]
graph_offset = Vector2(-147.095, 80.5413)
nodes/Animation/node = SubResource("AnimationNodeAnimation_lquwl")
nodes/Animation/position = Vector2(300, 260)
nodes/Blend2/node = SubResource("AnimationNodeBlend2_lquwl")
nodes/Blend2/position = Vector2(560, 70)
nodes/New_walk/node = SubResource("AnimationNodeAnimation_272bh")
nodes/New_walk/position = Vector2(310, 70)
nodes/output/position = Vector2(820, 140)
node_connections = [&"Blend2", 0, &"New_walk", &"Blend2", 1, &"Animation", &"output", 0, &"Blend2"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_7mycd"]
animation = &"New_idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_5vw27"]
animation = &"New_walk"

[sub_resource type="AnimationNodeBlend2" id="AnimationNodeBlend2_kek77"]
filter_enabled = true
filters = ["Node/Skeleton3D:mixamorigLeftArm", "Node/Skeleton3D:mixamorigLeftForeArm", "Node/Skeleton3D:mixamorigLeftHand", "Node/Skeleton3D:mixamorigLeftHandIndex1", "Node/Skeleton3D:mixamorigLeftHandIndex2", "Node/Skeleton3D:mixamorigLeftHandIndex3", "Node/Skeleton3D:mixamorigLeftHandMiddle1", "Node/Skeleton3D:mixamorigLeftHandMiddle2", "Node/Skeleton3D:mixamorigLeftHandMiddle3", "Node/Skeleton3D:mixamorigLeftHandPinky1", "Node/Skeleton3D:mixamorigLeftHandPinky2", "Node/Skeleton3D:mixamorigLeftHandPinky3", "Node/Skeleton3D:mixamorigLeftHandRing1", "Node/Skeleton3D:mixamorigLeftHandRing2", "Node/Skeleton3D:mixamorigLeftHandRing3", "Node/Skeleton3D:mixamorigLeftHandThumb1", "Node/Skeleton3D:mixamorigLeftHandThumb2", "Node/Skeleton3D:mixamorigLeftHandThumb3", "Node/Skeleton3D:mixamorigLeftShoulder"]

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_lquwl"]
nodes/Animation/node = SubResource("AnimationNodeAnimation_5vw27")
nodes/Animation/position = Vector2(280, 110)
"nodes/Animation 2/node" = SubResource("AnimationNodeAnimation_7mycd")
"nodes/Animation 2/position" = Vector2(345.232, 322.717)
nodes/Blend2/node = SubResource("AnimationNodeBlend2_kek77")
nodes/Blend2/position = Vector2(591.022, 242.038)
nodes/output/position = Vector2(950, 170)
node_connections = [&"Blend2", 0, &"Animation", &"Blend2", 1, &"Animation 2", &"output", 0, &"Blend2"]

[sub_resource type="BoxMesh" id="BoxMesh_lquwl"]

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_lquwl"]
transparency = 1

[sub_resource type="SphereShape3D" id="SphereShape3D_lquwl"]

[sub_resource type="SphereShape3D" id="SphereShape3D_272bh"]
radius = 0.0375767

[sub_resource type="StandardMaterial3D" id="StandardMaterial3D_7mycd"]
transparency = 1

[sub_resource type="SphereShape3D" id="SphereShape3D_7mycd"]

[node name="Main" type="Node3D"]
script = ExtResource("1_0xm2m")
player_one_node_a = NodePath("new_target")
player_one_node_b = NodePath("HandArea")
player_two_node_a = NodePath("new_target2")
player_two_node_b = NodePath("HandArea")
player_one_body_node = NodePath("Player")
player_two_body_node = NodePath("Player2")

[node name="WorldEnvironment" type="WorldEnvironment" parent="."]
environment = SubResource("Environment_h2yge")

[node name="DirectionalLight3D" type="DirectionalLight3D" parent="."]
transform = Transform3D(-0.866023, -0.433016, 0.250001, 0, 0.499998, 0.866027, -0.500003, 0.749999, -0.43301, 0, 0, 0)
shadow_enabled = true

[node name="CSGCombiner3D" type="CSGCombiner3D" parent="."]
use_collision = true

[node name="CSGBox3D" type="CSGBox3D" parent="CSGCombiner3D"]
physics_interpolation_mode = 2
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 50, 0, 0)
size = Vector3(140.5, 1, 20)

[node name="Camera3D" type="Camera3D" parent="."]
transform = Transform3D(-3.78552e-08, 0.766044, -0.642788, 2.18557e-08, 0.642788, 0.766044, 1, 1.49502e-08, -4.10753e-08, -4, 5, 0)
keep_aspect = 0

[node name="Center" type="Node3D" parent="."]

[node name="Tracker" type="Node3D" parent="."]

[node name="Proximity Test" parent="." instance=ExtResource("3_h2yge")]

[node name="Hands" type="Node3D" parent="."]

[node name="CSGCylinder3D" type="CSGCylinder3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 7.5, 2.50625, 0)
use_collision = true
height = 4.075

[node name="HandArea" parent="." node_paths=PackedStringArray("player_one", "player_two") instance=ExtResource("4_lquwl")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.41786, 0)
player_one = NodePath("../Player")
player_two = NodePath("../Player2")

[node name="PinJoint3D" parent="HandArea" index="2"]
params/bias = 0.99

[node name="Control" type="Control" parent="."]
layout_mode = 3
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
grow_horizontal = 2
grow_vertical = 2
size_flags_horizontal = 4
size_flags_vertical = 4

[node name="Sprite2D" type="Sprite2D" parent="Control"]
visible = false
scale = Vector2(0.04, 1.46)
texture = ExtResource("5_lquwl")

[node name="Middle Wall" type="StaticBody3D" parent="."]

[node name="CollisionShape3D" type="CollisionShape3D" parent="Middle Wall"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 12.0297, 0.530029, -0.00580406)
shape = SubResource("BoxShape3D_lquwl")
disabled = true
debug_fill = false

[node name="Player" parent="." instance=ExtResource("5_7mycd")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 0, 1.56996, -2)
has_gravity = false
can_jump = false
base_speed = 1.0
input_left = "move_left"
input_right = "move_right"
input_forward = "move_up"
input_back = "move_down"
input_jump = "jump"
reach_hand = "reach_hand"

[node name="Skeleton3D" parent="Player/Node" index="0"]
bones/0/position = Vector3(3.32534, 66.7233, 1.75487)
bones/0/rotation = Quaternion(-6.1114e-05, -0.0274542, 0.0442795, 0.998642)
bones/1/rotation = Quaternion(0.002815, 0.00624648, -0.00617325, 0.999958)
bones/2/rotation = Quaternion(0.00986644, 0.0151773, -0.0153497, 0.999718)
bones/3/rotation = Quaternion(-0.0292484, 0.0147858, -0.0199418, 0.999264)
bones/4/rotation = Quaternion(-0.0219837, -0.00224143, -0.0244132, 0.999458)
bones/5/rotation = Quaternion(-0.00279313, -0.0176694, -0.00416902, 0.999831)
bones/7/rotation = Quaternion(-0.654258, -0.38808, 0.521952, -0.385884)
bones/8/rotation = Quaternion(0.468925, -0.0148752, -0.276547, 0.838695)
bones/9/rotation = Quaternion(0.0120152, -0.000139078, 0.240777, 0.970506)
bones/10/rotation = Quaternion(0.165776, 0.361351, -0.084932, 0.913636)
bones/11/rotation = Quaternion(-0.0728993, 0.341322, 0.163538, 0.922735)
bones/12/rotation = Quaternion(0.113193, -0.174722, -0.0977371, 0.973194)
bones/13/rotation = Quaternion(0.0448915, 0.108802, 0.166956, 0.978914)
bones/15/rotation = Quaternion(0.0656715, 0.0889933, 0.0410829, 0.993015)
bones/16/rotation = Quaternion(0.14963, -0.00086386, -0.0204693, 0.98853)
bones/17/rotation = Quaternion(0.036877, -0.000230078, -0.00110627, 0.999319)
bones/19/rotation = Quaternion(0.132816, 0.00464021, -0.0127246, 0.991048)
bones/20/rotation = Quaternion(0.232698, -0.00145959, -0.0251474, 0.972223)
bones/21/rotation = Quaternion(0.137469, -6.80601e-05, -0.0116529, 0.990438)
bones/23/rotation = Quaternion(0.281218, 0.00697173, -0.00996914, 0.959567)
bones/24/rotation = Quaternion(0.146936, 0.00104348, -0.0135121, 0.989053)
bones/25/rotation = Quaternion(0.107151, 0.00132156, -0.00853551, 0.994205)
bones/27/rotation = Quaternion(0.2484, 0.011536, -0.0587266, 0.966807)
bones/28/rotation = Quaternion(0.252456, -0.00214457, -0.0199693, 0.9674)
bones/29/rotation = Quaternion(0.0599345, 4.66756e-06, -0.015522, 0.998082)
bones/31/rotation = Quaternion(0.519179, -0.478636, 0.538343, 0.459944)
bones/32/rotation = Quaternion(0.51422, -0.131091, -0.154108, 0.833453)
bones/33/rotation = Quaternion(0.0105893, 0.000181285, -0.223926, 0.974549)
bones/34/rotation = Quaternion(0.00499844, -0.021501, 0.184722, 0.982543)
bones/35/rotation = Quaternion(0.167228, -0.113392, -0.0384955, 0.978619)
bones/36/rotation = Quaternion(0.0222285, -0.0378495, -0.0640181, 0.996983)
bones/37/rotation = Quaternion(-0.0321271, -0.00549993, -0.0408273, 0.998634)
bones/39/rotation = Quaternion(0.0731135, -0.00568179, -0.0171065, 0.997161)
bones/40/rotation = Quaternion(0.318492, 1.28083e-05, 0.0365906, 0.947219)
bones/41/rotation = Quaternion(0.082448, -2.35657e-05, 0.00919142, 0.996553)
bones/43/rotation = Quaternion(0.179624, -0.0178148, 0.0071856, 0.983548)
bones/44/rotation = Quaternion(0.218611, 3.14764e-06, 0.0217962, 0.975569)
bones/45/rotation = Quaternion(0.050076, 0.0178801, 0.0076517, 0.998556)
bones/47/rotation = Quaternion(0.261623, -0.0167322, -0.0112424, 0.96496)
bones/48/rotation = Quaternion(0.14651, 5.78253e-06, 0.0175654, 0.989053)
bones/49/rotation = Quaternion(0.0700528, 0.0200099, 0.00894382, 0.997302)
bones/51/rotation = Quaternion(0.310944, -0.0259629, 0.0107628, 0.950013)
bones/52/rotation = Quaternion(0.119838, 0.000114651, 0.013437, 0.992703)
bones/53/rotation = Quaternion(0.0566758, -7.50229e-05, 0.00803162, 0.99836)
bones/55/rotation = Quaternion(-0.0696657, 0.0344724, 0.994269, 0.0733966)
bones/56/rotation = Quaternion(-0.463307, -0.0624667, -0.0240391, 0.883667)
bones/57/rotation = Quaternion(0.293803, 0.0613687, 0.0767289, 0.950803)
bones/58/rotation = Quaternion(0.426268, -0.00210751, -0.00263523, 0.90459)
bones/60/rotation = Quaternion(0.0263548, 0.212192, 0.973956, 0.0754254)
bones/61/rotation = Quaternion(-0.188776, -0.0344714, 0.00397524, 0.981407)
bones/62/rotation = Quaternion(0.457112, 0.0199204, 0.032487, 0.888593)
bones/63/rotation = Quaternion(0.296223, -0.00846443, 0.00234025, 0.955079)

[node name="LookAtModifier3D" parent="Player/Node/Skeleton3D" index="1"]
target_node = NodePath("../../../../HandArea")
bone_name = "mixamorigRightArm"
bone = 32

[node name="AnimationTree" type="AnimationTree" parent="Player"]
tree_root = SubResource("AnimationNodeBlendTree_5vw27")
anim_player = NodePath("../AnimationPlayer")
parameters/Blend2/blend_amount = 1.0

[node name="PinJoint3D" type="PinJoint3D" parent="Player"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, -71.9644, 0, -3.14566e-06)

[node name="Player2" parent="." instance=ExtResource("5_7mycd")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 0, 1.56996, 2)
has_gravity = false
can_jump = false
base_speed = 1.0
input_left = "move_left_p2"
input_right = "move_right_p2"
input_forward = "move_up_p2"
input_back = "move_down_p2"
input_jump = "jump_p2"
reach_hand = "reach_hand_p2"
playerTwo = true

[node name="Skeleton3D" parent="Player2/Node" index="0"]
bones/0/position = Vector3(3.32534, 66.7233, 1.75487)
bones/0/rotation = Quaternion(-6.1114e-05, -0.0274542, 0.0442795, 0.998642)
bones/1/rotation = Quaternion(0.002815, 0.00624648, -0.00617325, 0.999958)
bones/2/rotation = Quaternion(0.00986644, 0.0151773, -0.0153497, 0.999718)
bones/3/rotation = Quaternion(-0.0292484, 0.0147858, -0.0199418, 0.999264)
bones/4/rotation = Quaternion(-0.0219837, -0.00224143, -0.0244132, 0.999458)
bones/5/rotation = Quaternion(-0.00279313, -0.0176694, -0.00416902, 0.999831)
bones/7/rotation = Quaternion(-0.492342, -0.486629, 0.582139, -0.426504)
bones/8/rotation = Quaternion(0.506383, 0.111031, 0.0668081, 0.852517)
bones/9/rotation = Quaternion(0.0129796, -0.000138344, 0.260103, 0.965494)
bones/10/rotation = Quaternion(0.0926532, 0.129844, -0.188539, 0.969025)
bones/11/rotation = Quaternion(0.150401, -0.0366416, 0.153221, 0.975992)
bones/12/rotation = Quaternion(0.0116727, 0.0199882, -0.0547292, 0.998233)
bones/13/rotation = Quaternion(-0.0233629, 0.00488509, 0.0242824, 0.99942)
bones/15/rotation = Quaternion(0.207206, 0.00884601, 0.0476407, 0.977097)
bones/16/rotation = Quaternion(0.251484, 1.79664e-05, -0.0275381, 0.96747)
bones/17/rotation = Quaternion(0.136724, 2.31795e-05, -0.0144447, 0.990504)
bones/19/rotation = Quaternion(0.250826, 0.0130521, 0.0386334, 0.967173)
bones/20/rotation = Quaternion(0.162604, 0.000232472, -0.0154845, 0.98657)
bones/21/rotation = Quaternion(0.119162, -0.000134473, -0.0101674, 0.992823)
bones/23/rotation = Quaternion(0.288009, 0.0130065, 0.0488062, 0.956295)
bones/24/rotation = Quaternion(0.125569, 2.18957e-05, -0.0114993, 0.992018)
bones/25/rotation = Quaternion(0.0927588, -7.43786e-05, -0.00945481, 0.995644)
bones/27/rotation = Quaternion(0.368951, 0.026985, 0.00177769, 0.929055)
bones/28/rotation = Quaternion(0.161886, 0.00543107, 0.0184717, 0.986622)
bones/29/rotation = Quaternion(0.0669061, 0.000145083, -0.0100018, 0.997709)
bones/31/rotation = Quaternion(0.597494, -0.398904, 0.506903, 0.476368)
bones/32/rotation = Quaternion(0.466968, -0.0943562, -0.0910585, 0.874498)
bones/33/rotation = Quaternion(0.0193122, 0.00016972, -0.408385, 0.912606)
bones/34/rotation = Quaternion(-0.0821226, -0.155075, -0.0659914, 0.982269)
bones/35/rotation = Quaternion(0.102272, -0.22317, -0.218547, 0.944443)
bones/36/rotation = Quaternion(-0.0909107, -0.0410435, 0.0376012, 0.994302)
bones/37/rotation = Quaternion(-0.00624185, 0.0801089, -0.166116, 0.982827)
bones/39/rotation = Quaternion(0.12757, 0.00648197, -0.0737428, 0.989063)
bones/40/rotation = Quaternion(0.23214, 0.00145674, 0.0287296, 0.972257)
bones/41/rotation = Quaternion(0.152472, 0.00219393, 0.0035347, 0.988299)
bones/43/rotation = Quaternion(0.242536, 0.00744768, -0.0298997, 0.969653)
bones/44/rotation = Quaternion(0.329023, 0.00271827, 0.0338434, 0.943711)
bones/45/rotation = Quaternion(0.271179, 0.000702786, 0.0263767, 0.962167)
bones/47/rotation = Quaternion(0.379368, 0.00145256, 0.0148259, 0.925126)
bones/48/rotation = Quaternion(0.208125, -0.00142578, 0.0228193, 0.977835)
bones/49/rotation = Quaternion(0.17741, 0.00136576, -0.000126417, 0.984136)
bones/51/rotation = Quaternion(0.414856, -0.000608098, 0.0260242, 0.909514)
bones/52/rotation = Quaternion(0.410656, 0.00326669, 0.0357251, 0.911084)
bones/53/rotation = Quaternion(0.36441, 0.011007, 0.0173515, 0.931012)
bones/55/rotation = Quaternion(-0.0696657, 0.0344724, 0.994269, 0.0733966)
bones/56/rotation = Quaternion(-0.463307, -0.0624667, -0.0240391, 0.883667)
bones/57/rotation = Quaternion(0.293803, 0.0613687, 0.0767289, 0.950803)
bones/58/rotation = Quaternion(0.426268, -0.00210751, -0.00263523, 0.90459)
bones/60/rotation = Quaternion(0.0263548, 0.212192, 0.973956, 0.0754254)
bones/61/rotation = Quaternion(-0.188776, -0.0344714, 0.00397524, 0.981407)
bones/62/rotation = Quaternion(0.457112, 0.0199204, 0.032487, 0.888593)
bones/63/rotation = Quaternion(0.296223, -0.00846443, 0.00234025, 0.955079)

[node name="LookAtModifier3D" parent="Player2/Node/Skeleton3D" index="1"]
target_node = NodePath("../../../../HandArea")
bone_name = "mixamorigLeftArm"
bone = 8

[node name="AnimationTree" type="AnimationTree" parent="Player2"]
tree_root = SubResource("AnimationNodeBlendTree_lquwl")
anim_player = NodePath("../AnimationPlayer")
parameters/Blend2/blend_amount = 1.0

[node name="new_target" type="RigidBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0.000540495, 1.00203, 2.69562e-05)
gravity_scale = 0.0

[node name="new_target_old" type="CSGMesh3D" parent="new_target"]
transform = Transform3D(0.1, 0, 0, 0, 0.1, 0, 0, 0, 0.1, 0, 0, 0)
mesh = SubResource("BoxMesh_lquwl")
material = SubResource("StandardMaterial3D_lquwl")

[node name="P1_Hand" type="Area3D" parent="new_target/new_target_old"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="new_target/new_target_old/P1_Hand"]
shape = SubResource("SphereShape3D_lquwl")

[node name="CollisionShape3D" type="CollisionShape3D" parent="new_target"]
shape = SubResource("SphereShape3D_272bh")
disabled = true

[node name="PinJoint3D" type="PinJoint3D" parent="new_target"]
params/bias = 0.99
params/damping = 8.0

[node name="new_target2" type="RigidBody3D" parent="."]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1, 0)
gravity_scale = 0.0

[node name="new_target2_old" type="CSGMesh3D" parent="new_target2"]
transform = Transform3D(0.1, 0, 0, 0, 0.1, 0, 0, 0, 0.1, 0, 0, 0)
mesh = SubResource("BoxMesh_lquwl")
material = SubResource("StandardMaterial3D_7mycd")

[node name="P2_Hand" type="Area3D" parent="new_target2/new_target2_old"]

[node name="CollisionShape3D" type="CollisionShape3D" parent="new_target2/new_target2_old/P2_Hand"]
shape = SubResource("SphereShape3D_7mycd")

[node name="CollisionShape3D" type="CollisionShape3D" parent="new_target2"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 7, 0)
shape = SubResource("SphereShape3D_272bh")
disabled = true

[node name="PinJoint3D" type="PinJoint3D" parent="new_target2"]
params/bias = 0.99
params/damping = 8.0

[editable path="Proximity Test"]
[editable path="HandArea"]
[editable path="Player"]
[editable path="Player2"]
